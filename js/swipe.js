function MobiSwipe(id){this.HORIZONTAL=1;this.VERTICAL=2;this.AXIS_THRESHOLD=30;this.GESTURE_DELTA=60;this.direction=this.HORIZONTAL;this.element=document.getElementById(id);this.onswiperight=null;this.onswipeleft=null;this.onswipeup=null;this.onswipedown=null;this.inGesture=false;this._originalX=0
this._originalY=0
var _this=this;var mousedown=function(event){_this.inGesture=true;_this._originalX=(event.touches)?event.touches[0].pageX:event.pageX;_this._originalY=(event.touches)?event.touches[0].pageY:event.pageY;if(event.touches&&event.touches.length!=1){_this.inGesture=false;}};var mousemove=function(event){var delta=0;var currentX=(event.touches)?event.touches[0].pageX:event.pageX;var currentY=(event.touches)?event.touches[0].pageY:event.pageY;if(_this.inGesture){if((_this.direction==_this.HORIZONTAL)){delta=Math.abs(currentY-_this._originalY);}else{delta=Math.abs(currentX-_this._originalX);event.preventDefault();}if(delta>_this.AXIS_THRESHOLD){_this.inGesture=false;}}if(_this.inGesture){if(_this.direction==_this.HORIZONTAL){delta=Math.abs(currentX-_this._originalX);if(currentX>_this._originalX){direction=0;}else{direction=1;}}else{delta=Math.abs(currentY-_this._originalY);if(currentY>_this._originalY){direction=2;}else{direction=3;}}if(delta>=_this.GESTURE_DELTA){var handler=null;switch(direction){case 0:handler=_this.onswiperight;break;case 1:handler=_this.onswipeleft;break;case 2:handler=_this.onswipedown;break;case 3:handler=_this.onswipeup;break;}if(handler!=null){handler(delta);}_this.inGesture=false;}}};this.element.addEventListener('touchstart',mousedown,false);this.element.addEventListener('touchmove',mousemove,false);this.element.addEventListener('touchcancel',function(){_this.inGesture=false;},false);}